/* https://github.com/neojski/js-base64 */
(function(global: object){"use strict";if(global.Base64)return;var version: string="2.1.2";var buffer: object;if(typeof module!=="undefined"&&module.exports){buffer=require("buffer").Buffer}var b64chars: string="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b64tab: object=function(bin: string){var t: object={};for(var i=0,l=bin.length;i<l;i++)t[bin.charAt(i)]=i;return t}(b64chars);var fromCharCode: object=String.fromCharCode;var cb_utob: Function=function(c: string){if(c.length<2){var cc: number=c.charCodeAt(0);return cc<128?c:cc<2048?fromCharCode(192|cc>>>6)+fromCharCode(128|cc&63):fromCharCode(224|cc>>>12&15)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|cc&63)}else{var cc: number=65536+(c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320);return fromCharCode(240|cc>>>18&7)+fromCharCode(128|cc>>>12&63)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|cc&63)}};var re_utob: RegExp=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;var utob: Function=function(u: string){return u.replace(re_utob,cb_utob)};var cb_encode: Function=function(ccc: string){var padlen: number=[0,2,1][ccc.length%3],ord: number=ccc.charCodeAt(0)<<16|(ccc.length>1?ccc.charCodeAt(1):0)<<8|(ccc.length>2?ccc.charCodeAt(2):0),chars: any[]=[b64chars.charAt(ord>>>18),b64chars.charAt(ord>>>12&63),padlen>=2?"=":b64chars.charAt(ord>>>6&63),padlen>=1?"=":b64chars.charAt(ord&63)];return chars.join("")};var btoa: Function=global.btoa||function(b: string){return b.replace(/[\s\S]{1,3}/g,cb_encode)};var _encode: Function=buffer?function(u: string){return new buffer(u).toString("base64")}:function(u: any[]){return btoa(utob(u))};var encode: Function=function(u: string,urisafe: boolean){return!urisafe?_encode(u):_encode(u).replace(/[+\/]/g,function(m0: string){return m0=="+"?"-":"_"}).replace(/=/g,"")};var encodeURI: Function=function(u: any[]){return encode(u,true)};var re_btou: any[]=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g");var cb_btou: Function=function(cccc: string){switch(cccc.length){case 4:var cp: number=(7&cccc.charCodeAt(0))<<18|(63&cccc.charCodeAt(1))<<12|(63&cccc.charCodeAt(2))<<6|63&cccc.charCodeAt(3),offset: number=cp-65536;return fromCharCode((offset>>>10)+55296)+fromCharCode((offset&1023)+56320);case 3:return fromCharCode((15&cccc.charCodeAt(0))<<12|(63&cccc.charCodeAt(1))<<6|63&cccc.charCodeAt(2));default:return fromCharCode((31&cccc.charCodeAt(0))<<6|63&cccc.charCodeAt(1))}};var btou: Function=function(b: string){return b.replace(re_btou,cb_btou)};var cb_decode: Function=function(cccc: string){var len: number=cccc.length,padlen: number=len%4,n: number=(len>0?b64tab[cccc.charAt(0)]<<18:0)|(len>1?b64tab[cccc.charAt(1)]<<12:0)|(len>2?b64tab[cccc.charAt(2)]<<6:0)|(len>3?b64tab[cccc.charAt(3)]:0),chars: any[]=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(n&255)];chars.length-=[0,0,2,1][padlen];return chars.join("")};var atob: Function=global.atob||function(a: string){return a.replace(/[\s\S]{1,4}/g,cb_decode)};var _decode: Function=buffer?function(a: string){return new buffer(a,"base64").toString()}:function(a: any[]){return btou(atob(a))};var decode: Function=function(a: string){return _decode(a.replace(/[-_]/g,function(m0: string){return m0=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode};if(typeof Object.defineProperty==="function"){var noEnum: Function=function(v: string){return{value:v,enumerable:false,writable:true,configurable:true}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)}));Object.defineProperty(String.prototype,"toBase64",noEnum(function(urisafe: string){return encode(this,urisafe)}));Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,true)}))}}})(this);
